#
# Makefile for monoenergetic
#
# 
SYSTEM  :=  $(shell uname)
PWD  :=  $(shell pwd)
#
# TARGET is the basename of the file containing main()
# This should be a separate file 

TARGET   = foot_geo

ROOTCFLAGS	:= $(shell root-config --cflags)
ROOTLIBS	:= $(shell root-config --libs)
ROOTGLIBS	:= $(shell root-config --glibs)

CXX           = g++
CXXFLAGS      = -g3 -ggdb  -fPIC
CXXFLAGS      += $(ROOTCFLAGS)
LD            = g++
LDFLAGS	      = $(ROOTLIBS) $(ROOTGLIBS) -lm
MYLIBS = `root-config --cflags --glibs --libs`

all: $(TARGET)

$(TARGET): $(TARGET).o Geometry.o GeometryDict.o
	$(CXX) $(LDFLAGS) $^ -o $@ $(MYLIBS)

$(TARGET).o: $(TARGET).cc $(TARGET).h
	$(CXX) $(CXXFLAGS) -c $(TARGET).cc -o $(TARGET).o $(MYLIBS)

Geometry.o:  Geometry.cpp Geometry.h $(TARGET).h
	$(CXX) $(CXXFLAGS) -c Geometry.cpp -o Geometry.o $(MYLIBS)

GeometryDict.o:  GeometryDict.cpp Geometry.h 
	$(CXX) $(CXXFLAGS) -c GeometryDict.cpp -o GeometryDict.o $(MYLIBS)

GeometryDict.cpp:Geometry.h GeometryLinkDef.h
		@echo "Generating dictionary $@..." 
		@$(ROOTSYS)/bin/rootcint -f GeometryDict.cpp -c -p Geometry.h GeometryLinkDef.h

clean:
	-rm -rf $(TARGET) $(TARGET).o Geometry.o *Dict*



